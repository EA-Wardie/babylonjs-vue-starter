{"ast":null,"code":"import \"core-js/modules/es.function.name.js\";\nimport { GLTFLoader, ArrayItem } from \"../glTFLoader.js\";\nvar NAME = \"EXT_texture_webp\";\n/**\n * [Specification](https://github.com/KhronosGroup/glTF/blob/master/extensions/2.0/Vendor/EXT_texture_webp/)\n */\n\nvar EXT_texture_webp =\n/** @class */\nfunction () {\n  /**\n   * @param loader\n   * @hidden\n   */\n  function EXT_texture_webp(loader) {\n    /** The name of this extension. */\n    this.name = NAME;\n    this._loader = loader;\n    this.enabled = loader.isExtensionUsed(NAME);\n  }\n  /** @hidden */\n\n\n  EXT_texture_webp.prototype.dispose = function () {\n    this._loader = null;\n  };\n  /**\n   * @param context\n   * @param texture\n   * @param assign\n   * @hidden\n   */\n\n\n  EXT_texture_webp.prototype._loadTextureAsync = function (context, texture, assign) {\n    var _this = this;\n\n    return GLTFLoader.LoadExtensionAsync(context, texture, this.name, function (extensionContext, extension) {\n      var sampler = texture.sampler == undefined ? GLTFLoader.DefaultSampler : ArrayItem.Get(\"\".concat(context, \"/sampler\"), _this._loader.gltf.samplers, texture.sampler);\n      var image = ArrayItem.Get(\"\".concat(extensionContext, \"/source\"), _this._loader.gltf.images, extension.source);\n      return _this._loader._createTextureAsync(context, sampler, image, function (babylonTexture) {\n        assign(babylonTexture);\n      }, undefined, !texture._textureInfo.nonColorData);\n    });\n  };\n\n  return EXT_texture_webp;\n}();\n\nexport { EXT_texture_webp };\nGLTFLoader.RegisterExtension(NAME, function (loader) {\n  return new EXT_texture_webp(loader);\n});","map":{"version":3,"mappings":";AAEA,SAASA,UAAT,EAAqBC,SAArB,QAAsC,kBAAtC;AAMA,IAAMC,IAAI,GAAG,kBAAb;AAEA;;;;AAGA;AAAA;AAAA;AASI;;;;AAIA,4BAAYC,MAAZ,EAA8B;AAZ9B;AACgB,gBAAOD,IAAP;AAYZ,SAAKE,OAAL,GAAeD,MAAf;AACA,SAAKE,OAAL,GAAeF,MAAM,CAACG,eAAP,CAAuBJ,IAAvB,CAAf;AACH;AAED;;;AACOK,uCAAP;AACK,SAAKH,OAAL,GAAuB,IAAvB;AACJ,GAFM;AAIP;;;;;;;;AAMOG,iDAAP,UAAyBC,OAAzB,EAA0CC,OAA1C,EAA6DC,MAA7D,EAA0G;AAA1G;;AACI,WAAOV,UAAU,CAACW,kBAAX,CAA4DH,OAA5D,EAAqEC,OAArE,EAA8E,KAAKG,IAAnF,EAAyF,UAACC,gBAAD,EAAmBC,SAAnB,EAA4B;AACxH,UAAMC,OAAO,GAAGN,OAAO,CAACM,OAAR,IAAmBC,SAAnB,GAA+BhB,UAAU,CAACiB,cAA1C,GAA2DhB,SAAS,CAACiB,GAAV,CAAc,UAAGV,OAAH,EAAU,UAAV,CAAd,EAAoCW,KAAI,CAACf,OAAL,CAAagB,IAAb,CAAkBC,QAAtD,EAAgEZ,OAAO,CAACM,OAAxE,CAA3E;AACA,UAAMO,KAAK,GAAGrB,SAAS,CAACiB,GAAV,CAAc,UAAGL,gBAAH,EAAmB,SAAnB,CAAd,EAA4CM,KAAI,CAACf,OAAL,CAAagB,IAAb,CAAkBG,MAA9D,EAAsET,SAAS,CAACU,MAAhF,CAAd;AACA,aAAOL,KAAI,CAACf,OAAL,CAAaqB,mBAAb,CACHjB,OADG,EAEHO,OAFG,EAGHO,KAHG,EAIH,UAACI,cAAD,EAAe;AACXhB,cAAM,CAACgB,cAAD,CAAN;AACH,OANE,EAOHV,SAPG,EAQH,CAACP,OAAO,CAACkB,YAAR,CAAqBC,YARnB,CAAP;AAUH,KAbM,CAAP;AAcH,GAfM;;AAgBX;AAAC,CA7CD;;;AA+CA5B,UAAU,CAAC6B,iBAAX,CAA6B3B,IAA7B,EAAmC,UAACC,MAAD,EAAO;AAAK,aAAII,gBAAJ,CAAqBJ,MAArB;AAA4B,CAA3E","names":["GLTFLoader","ArrayItem","NAME","loader","_loader","enabled","isExtensionUsed","EXT_texture_webp","context","texture","assign","LoadExtensionAsync","name","extensionContext","extension","sampler","undefined","DefaultSampler","Get","_this","gltf","samplers","image","images","source","_createTextureAsync","babylonTexture","_textureInfo","nonColorData","RegisterExtension"],"sourceRoot":"","sources":["../../../../../../../lts/loaders/generated/glTF/2.0/Extensions/EXT_texture_webp.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/naming-convention */\r\nimport type { IGLTFLoaderExtension } from \"../glTFLoaderExtension\";\r\nimport { GLTFLoader, ArrayItem } from \"../glTFLoader\";\r\nimport type { ITexture } from \"../glTFLoaderInterfaces\";\r\nimport type { BaseTexture } from \"core/Materials/Textures/baseTexture\";\r\nimport type { Nullable } from \"core/types\";\r\nimport type { IEXTTextureWebP } from \"babylonjs-gltf2interface\";\r\n\r\nconst NAME = \"EXT_texture_webp\";\r\n\r\n/**\r\n * [Specification](https://github.com/KhronosGroup/glTF/blob/master/extensions/2.0/Vendor/EXT_texture_webp/)\r\n */\r\nexport class EXT_texture_webp implements IGLTFLoaderExtension {\r\n    /** The name of this extension. */\r\n    public readonly name = NAME;\r\n\r\n    /** Defines whether this extension is enabled. */\r\n    public enabled: boolean;\r\n\r\n    private _loader: GLTFLoader;\r\n\r\n    /**\r\n     * @param loader\r\n     * @hidden\r\n     */\r\n    constructor(loader: GLTFLoader) {\r\n        this._loader = loader;\r\n        this.enabled = loader.isExtensionUsed(NAME);\r\n    }\r\n\r\n    /** @hidden */\r\n    public dispose() {\r\n        (this._loader as any) = null;\r\n    }\r\n\r\n    /**\r\n     * @param context\r\n     * @param texture\r\n     * @param assign\r\n     * @hidden\r\n     */\r\n    public _loadTextureAsync(context: string, texture: ITexture, assign: (babylonTexture: BaseTexture) => void): Nullable<Promise<BaseTexture>> {\r\n        return GLTFLoader.LoadExtensionAsync<IEXTTextureWebP, BaseTexture>(context, texture, this.name, (extensionContext, extension) => {\r\n            const sampler = texture.sampler == undefined ? GLTFLoader.DefaultSampler : ArrayItem.Get(`${context}/sampler`, this._loader.gltf.samplers, texture.sampler);\r\n            const image = ArrayItem.Get(`${extensionContext}/source`, this._loader.gltf.images, extension.source);\r\n            return this._loader._createTextureAsync(\r\n                context,\r\n                sampler,\r\n                image,\r\n                (babylonTexture) => {\r\n                    assign(babylonTexture);\r\n                },\r\n                undefined,\r\n                !texture._textureInfo.nonColorData\r\n            );\r\n        });\r\n    }\r\n}\r\n\r\nGLTFLoader.RegisterExtension(NAME, (loader) => new EXT_texture_webp(loader));\r\n"]},"metadata":{},"sourceType":"module"}