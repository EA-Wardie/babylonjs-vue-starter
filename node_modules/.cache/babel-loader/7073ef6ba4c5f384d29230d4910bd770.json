{"ast":null,"code":"import \"core-js/modules/es.object.define-property.js\";\nimport { __extends } from \"tslib\";\nimport { StencilStateComposer } from \"../../States/stencilStateComposer.js\";\n/**\n * @hidden\n **/\n\nvar WebGPUStencilStateComposer =\n/** @class */\nfunction (_super) {\n  __extends(WebGPUStencilStateComposer, _super);\n\n  function WebGPUStencilStateComposer(cache) {\n    var _this = _super.call(this, false) || this;\n\n    _this._cache = cache;\n\n    _this.reset();\n\n    return _this;\n  }\n\n  Object.defineProperty(WebGPUStencilStateComposer.prototype, \"func\", {\n    get: function get() {\n      return this._func;\n    },\n    set: function set(value) {\n      if (this._func === value) {\n        return;\n      }\n\n      this._func = value;\n\n      this._cache.setStencilCompare(value);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(WebGPUStencilStateComposer.prototype, \"funcMask\", {\n    get: function get() {\n      return this._funcMask;\n    },\n    set: function set(value) {\n      if (this._funcMask === value) {\n        return;\n      }\n\n      this._funcMask = value;\n\n      this._cache.setStencilReadMask(value);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(WebGPUStencilStateComposer.prototype, \"opStencilFail\", {\n    get: function get() {\n      return this._opStencilFail;\n    },\n    set: function set(value) {\n      if (this._opStencilFail === value) {\n        return;\n      }\n\n      this._opStencilFail = value;\n\n      this._cache.setStencilFailOp(value);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(WebGPUStencilStateComposer.prototype, \"opDepthFail\", {\n    get: function get() {\n      return this._opDepthFail;\n    },\n    set: function set(value) {\n      if (this._opDepthFail === value) {\n        return;\n      }\n\n      this._opDepthFail = value;\n\n      this._cache.setStencilDepthFailOp(value);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(WebGPUStencilStateComposer.prototype, \"opStencilDepthPass\", {\n    get: function get() {\n      return this._opStencilDepthPass;\n    },\n    set: function set(value) {\n      if (this._opStencilDepthPass === value) {\n        return;\n      }\n\n      this._opStencilDepthPass = value;\n\n      this._cache.setStencilPassOp(value);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(WebGPUStencilStateComposer.prototype, \"mask\", {\n    get: function get() {\n      return this._mask;\n    },\n    set: function set(value) {\n      if (this._mask === value) {\n        return;\n      }\n\n      this._mask = value;\n\n      this._cache.setStencilWriteMask(value);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(WebGPUStencilStateComposer.prototype, \"enabled\", {\n    get: function get() {\n      return this._enabled;\n    },\n    set: function set(value) {\n      if (this._enabled === value) {\n        return;\n      }\n\n      this._enabled = value;\n\n      this._cache.setStencilEnabled(value);\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  WebGPUStencilStateComposer.prototype.reset = function () {\n    _super.prototype.reset.call(this);\n\n    this._cache.resetStencilState();\n  };\n\n  WebGPUStencilStateComposer.prototype.apply = function () {\n    var _a;\n\n    var stencilMaterialEnabled = (_a = this.stencilMaterial) === null || _a === void 0 ? void 0 : _a.enabled;\n    this.enabled = stencilMaterialEnabled ? this.stencilMaterial.enabled : this.stencilGlobal.enabled;\n\n    if (!this.enabled) {\n      return;\n    }\n\n    this.func = stencilMaterialEnabled ? this.stencilMaterial.func : this.stencilGlobal.func;\n    this.funcRef = stencilMaterialEnabled ? this.stencilMaterial.funcRef : this.stencilGlobal.funcRef;\n    this.funcMask = stencilMaterialEnabled ? this.stencilMaterial.funcMask : this.stencilGlobal.funcMask;\n    this.opStencilFail = stencilMaterialEnabled ? this.stencilMaterial.opStencilFail : this.stencilGlobal.opStencilFail;\n    this.opDepthFail = stencilMaterialEnabled ? this.stencilMaterial.opDepthFail : this.stencilGlobal.opDepthFail;\n    this.opStencilDepthPass = stencilMaterialEnabled ? this.stencilMaterial.opStencilDepthPass : this.stencilGlobal.opStencilDepthPass;\n    this.mask = stencilMaterialEnabled ? this.stencilMaterial.mask : this.stencilGlobal.mask;\n  };\n\n  return WebGPUStencilStateComposer;\n}(StencilStateComposer);\n\nexport { WebGPUStencilStateComposer };","map":{"version":3,"mappings":"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","names":["StencilStateComposer","__extends","cache","_super","_this","_cache","reset","Object","WebGPUStencilStateComposer","_func","value","setStencilCompare","_funcMask","setStencilReadMask","_opStencilFail","setStencilFailOp","_opDepthFail","setStencilDepthFailOp","_opStencilDepthPass","setStencilPassOp","_mask","setStencilWriteMask","_enabled","setStencilEnabled","call","resetStencilState","stencilMaterialEnabled","stencilMaterial","_a","enabled","stencilGlobal","func","funcRef","funcMask","opStencilFail","opDepthFail","opStencilDepthPass","mask"],"sourceRoot":"","sources":["../../../../../../lts/core/generated/Engines/WebGPU/webgpuStencilStateComposer.ts"],"sourcesContent":["import type { WebGPUCacheRenderPipeline } from \"./webgpuCacheRenderPipeline\";\r\nimport { StencilStateComposer } from \"../../States/stencilStateComposer\";\r\n\r\n/**\r\n * @hidden\r\n **/\r\nexport class WebGPUStencilStateComposer extends StencilStateComposer {\r\n    private _cache: WebGPUCacheRenderPipeline;\r\n\r\n    public constructor(cache: WebGPUCacheRenderPipeline) {\r\n        super(false);\r\n        this._cache = cache;\r\n        this.reset();\r\n    }\r\n\r\n    public get func(): number {\r\n        return this._func;\r\n    }\r\n\r\n    public set func(value: number) {\r\n        if (this._func === value) {\r\n            return;\r\n        }\r\n\r\n        this._func = value;\r\n        this._cache.setStencilCompare(value);\r\n    }\r\n\r\n    public get funcMask(): number {\r\n        return this._funcMask;\r\n    }\r\n\r\n    public set funcMask(value: number) {\r\n        if (this._funcMask === value) {\r\n            return;\r\n        }\r\n\r\n        this._funcMask = value;\r\n        this._cache.setStencilReadMask(value);\r\n    }\r\n\r\n    public get opStencilFail(): number {\r\n        return this._opStencilFail;\r\n    }\r\n\r\n    public set opStencilFail(value: number) {\r\n        if (this._opStencilFail === value) {\r\n            return;\r\n        }\r\n\r\n        this._opStencilFail = value;\r\n        this._cache.setStencilFailOp(value);\r\n    }\r\n\r\n    public get opDepthFail(): number {\r\n        return this._opDepthFail;\r\n    }\r\n\r\n    public set opDepthFail(value: number) {\r\n        if (this._opDepthFail === value) {\r\n            return;\r\n        }\r\n\r\n        this._opDepthFail = value;\r\n        this._cache.setStencilDepthFailOp(value);\r\n    }\r\n\r\n    public get opStencilDepthPass(): number {\r\n        return this._opStencilDepthPass;\r\n    }\r\n\r\n    public set opStencilDepthPass(value: number) {\r\n        if (this._opStencilDepthPass === value) {\r\n            return;\r\n        }\r\n\r\n        this._opStencilDepthPass = value;\r\n        this._cache.setStencilPassOp(value);\r\n    }\r\n\r\n    public get mask(): number {\r\n        return this._mask;\r\n    }\r\n\r\n    public set mask(value: number) {\r\n        if (this._mask === value) {\r\n            return;\r\n        }\r\n\r\n        this._mask = value;\r\n        this._cache.setStencilWriteMask(value);\r\n    }\r\n\r\n    public get enabled(): boolean {\r\n        return this._enabled;\r\n    }\r\n\r\n    public set enabled(value: boolean) {\r\n        if (this._enabled === value) {\r\n            return;\r\n        }\r\n\r\n        this._enabled = value;\r\n        this._cache.setStencilEnabled(value);\r\n    }\r\n\r\n    public reset() {\r\n        super.reset();\r\n        this._cache.resetStencilState();\r\n    }\r\n\r\n    public apply() {\r\n        const stencilMaterialEnabled = this.stencilMaterial?.enabled;\r\n\r\n        this.enabled = stencilMaterialEnabled ? this.stencilMaterial!.enabled : this.stencilGlobal.enabled;\r\n        if (!this.enabled) {\r\n            return;\r\n        }\r\n\r\n        this.func = stencilMaterialEnabled ? this.stencilMaterial!.func : this.stencilGlobal.func;\r\n        this.funcRef = stencilMaterialEnabled ? this.stencilMaterial!.funcRef : this.stencilGlobal.funcRef;\r\n        this.funcMask = stencilMaterialEnabled ? this.stencilMaterial!.funcMask : this.stencilGlobal.funcMask;\r\n        this.opStencilFail = stencilMaterialEnabled ? this.stencilMaterial!.opStencilFail : this.stencilGlobal.opStencilFail;\r\n        this.opDepthFail = stencilMaterialEnabled ? this.stencilMaterial!.opDepthFail : this.stencilGlobal.opDepthFail;\r\n        this.opStencilDepthPass = stencilMaterialEnabled ? this.stencilMaterial!.opStencilDepthPass : this.stencilGlobal.opStencilDepthPass;\r\n        this.mask = stencilMaterialEnabled ? this.stencilMaterial!.mask : this.stencilGlobal.mask;\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}