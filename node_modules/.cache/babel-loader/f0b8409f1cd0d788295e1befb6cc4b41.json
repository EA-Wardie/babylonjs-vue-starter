{"ast":null,"code":"import \"core-js/modules/es.object.define-property.js\";\nimport \"core-js/modules/es.string.substr.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport { __extends } from \"tslib\";\nimport { NodeMaterialBlock } from \"../nodeMaterialBlock.js\";\nimport { NodeMaterialBlockConnectionPointTypes } from \"../Enums/nodeMaterialBlockConnectionPointTypes.js\";\nimport { NodeMaterialBlockTargets } from \"../Enums/nodeMaterialBlockTargets.js\";\nimport { RegisterClass } from \"../../../Misc/typeStore.js\";\n/**\n * Block used to create a Color3/4 out of individual inputs (one for each component)\n */\n\nvar ColorMergerBlock =\n/** @class */\nfunction (_super) {\n  __extends(ColorMergerBlock, _super);\n  /**\n   * Create a new ColorMergerBlock\n   * @param name defines the block name\n   */\n\n\n  function ColorMergerBlock(name) {\n    var _this = _super.call(this, name, NodeMaterialBlockTargets.Neutral) || this;\n    /**\n     * Gets or sets the swizzle for r (meaning which component to affect to the output.r)\n     */\n\n\n    _this.rSwizzle = \"r\";\n    /**\n     * Gets or sets the swizzle for g (meaning which component to affect to the output.g)\n     */\n\n    _this.gSwizzle = \"g\";\n    /**\n     * Gets or sets the swizzle for b (meaning which component to affect to the output.b)\n     */\n\n    _this.bSwizzle = \"b\";\n    /**\n     * Gets or sets the swizzle for a (meaning which component to affect to the output.a)\n     */\n\n    _this.aSwizzle = \"a\";\n\n    _this.registerInput(\"rgb \", NodeMaterialBlockConnectionPointTypes.Color3, true);\n\n    _this.registerInput(\"r\", NodeMaterialBlockConnectionPointTypes.Float, true);\n\n    _this.registerInput(\"g\", NodeMaterialBlockConnectionPointTypes.Float, true);\n\n    _this.registerInput(\"b\", NodeMaterialBlockConnectionPointTypes.Float, true);\n\n    _this.registerInput(\"a\", NodeMaterialBlockConnectionPointTypes.Float, true);\n\n    _this.registerOutput(\"rgba\", NodeMaterialBlockConnectionPointTypes.Color4);\n\n    _this.registerOutput(\"rgb\", NodeMaterialBlockConnectionPointTypes.Color3);\n\n    return _this;\n  }\n  /**\n   * Gets the current class name\n   * @returns the class name\n   */\n\n\n  ColorMergerBlock.prototype.getClassName = function () {\n    return \"ColorMergerBlock\";\n  };\n\n  Object.defineProperty(ColorMergerBlock.prototype, \"rgbIn\", {\n    /**\n     * Gets the rgb component (input)\n     */\n    get: function get() {\n      return this._inputs[0];\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(ColorMergerBlock.prototype, \"r\", {\n    /**\n     * Gets the r component (input)\n     */\n    get: function get() {\n      return this._inputs[1];\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(ColorMergerBlock.prototype, \"g\", {\n    /**\n     * Gets the g component (input)\n     */\n    get: function get() {\n      return this._inputs[2];\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(ColorMergerBlock.prototype, \"b\", {\n    /**\n     * Gets the b component (input)\n     */\n    get: function get() {\n      return this._inputs[3];\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(ColorMergerBlock.prototype, \"a\", {\n    /**\n     * Gets the a component (input)\n     */\n    get: function get() {\n      return this._inputs[4];\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(ColorMergerBlock.prototype, \"rgba\", {\n    /**\n     * Gets the rgba component (output)\n     */\n    get: function get() {\n      return this._outputs[0];\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(ColorMergerBlock.prototype, \"rgbOut\", {\n    /**\n     * Gets the rgb component (output)\n     */\n    get: function get() {\n      return this._outputs[1];\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(ColorMergerBlock.prototype, \"rgb\", {\n    /**\n     * Gets the rgb component (output)\n     * @deprecated Please use rgbOut instead.\n     */\n    get: function get() {\n      return this.rgbOut;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  ColorMergerBlock.prototype._inputRename = function (name) {\n    if (name === \"rgb \") {\n      return \"rgbIn\";\n    }\n\n    return name;\n  };\n\n  ColorMergerBlock.prototype._buildSwizzle = function (len) {\n    var swizzle = this.rSwizzle + this.gSwizzle + this.bSwizzle + this.aSwizzle;\n    return \".\" + swizzle.substr(0, len);\n  };\n\n  ColorMergerBlock.prototype._buildBlock = function (state) {\n    _super.prototype._buildBlock.call(this, state);\n\n    var rInput = this.r;\n    var gInput = this.g;\n    var bInput = this.b;\n    var aInput = this.a;\n    var rgbInput = this.rgbIn;\n    var color4Output = this._outputs[0];\n    var color3Output = this._outputs[1];\n\n    if (rgbInput.isConnected) {\n      if (color4Output.hasEndpoints) {\n        state.compilationString += this._declareOutput(color4Output, state) + \" = vec4(\".concat(rgbInput.associatedVariableName, \", \").concat(aInput.isConnected ? this._writeVariable(aInput) : \"0.0\", \")\").concat(this._buildSwizzle(4), \";\\r\\n\");\n      }\n\n      if (color3Output.hasEndpoints) {\n        state.compilationString += this._declareOutput(color3Output, state) + \" = \".concat(rgbInput.associatedVariableName).concat(this._buildSwizzle(3), \";\\r\\n\");\n      }\n    } else {\n      if (color4Output.hasEndpoints) {\n        state.compilationString += this._declareOutput(color4Output, state) + \" = vec4(\".concat(rInput.isConnected ? this._writeVariable(rInput) : \"0.0\", \", \").concat(gInput.isConnected ? this._writeVariable(gInput) : \"0.0\", \", \").concat(bInput.isConnected ? this._writeVariable(bInput) : \"0.0\", \", \").concat(aInput.isConnected ? this._writeVariable(aInput) : \"0.0\", \")\").concat(this._buildSwizzle(4), \";\\r\\n\");\n      }\n\n      if (color3Output.hasEndpoints) {\n        state.compilationString += this._declareOutput(color3Output, state) + \" = vec3(\".concat(rInput.isConnected ? this._writeVariable(rInput) : \"0.0\", \", \").concat(gInput.isConnected ? this._writeVariable(gInput) : \"0.0\", \", \").concat(bInput.isConnected ? this._writeVariable(bInput) : \"0.0\", \")\").concat(this._buildSwizzle(3), \";\\r\\n\");\n      }\n    }\n\n    return this;\n  };\n\n  ColorMergerBlock.prototype.serialize = function () {\n    var serializationObject = _super.prototype.serialize.call(this);\n\n    serializationObject.rSwizzle = this.rSwizzle;\n    serializationObject.gSwizzle = this.gSwizzle;\n    serializationObject.bSwizzle = this.bSwizzle;\n    serializationObject.aSwizzle = this.aSwizzle;\n    return serializationObject;\n  };\n\n  ColorMergerBlock.prototype._deserialize = function (serializationObject, scene, rootUrl) {\n    var _a, _b, _c, _d;\n\n    _super.prototype._deserialize.call(this, serializationObject, scene, rootUrl);\n\n    this.rSwizzle = (_a = serializationObject.rSwizzle) !== null && _a !== void 0 ? _a : \"r\";\n    this.gSwizzle = (_b = serializationObject.gSwizzle) !== null && _b !== void 0 ? _b : \"g\";\n    this.bSwizzle = (_c = serializationObject.bSwizzle) !== null && _c !== void 0 ? _c : \"b\";\n    this.aSwizzle = (_d = serializationObject.aSwizzle) !== null && _d !== void 0 ? _d : \"a\";\n  };\n\n  ColorMergerBlock.prototype._dumpPropertiesCode = function () {\n    var codeString = _super.prototype._dumpPropertiesCode.call(this);\n\n    codeString += \"\".concat(this._codeVariableName, \".rSwizzle = \").concat(this.rSwizzle, \"};\\r\\n\");\n    codeString += \"\".concat(this._codeVariableName, \".gSwizzle = \").concat(this.gSwizzle, \"};\\r\\n\");\n    codeString += \"\".concat(this._codeVariableName, \".bSwizzle = \").concat(this.bSwizzle, \"};\\r\\n\");\n    codeString += \"\".concat(this._codeVariableName, \".aSwizzle = \").concat(this.aSwizzle, \"};\\r\\n\");\n    return codeString;\n  };\n\n  return ColorMergerBlock;\n}(NodeMaterialBlock);\n\nexport { ColorMergerBlock };\nRegisterClass(\"BABYLON.ColorMergerBlock\", ColorMergerBlock);","map":{"version":3,"mappings":"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","names":["NodeMaterialBlock","NodeMaterialBlockConnectionPointTypes","NodeMaterialBlockTargets","RegisterClass","__extends","name","_super","Neutral","_this","registerInput","Color3","Float","registerOutput","Color4","ColorMergerBlock","Object","_inputs","_outputs","rgbOut","len","swizzle","rSwizzle","gSwizzle","bSwizzle","aSwizzle","substr","state","_buildBlock","call","rInput","r","gInput","g","bInput","b","aInput","a","rgbInput","rgbIn","color4Output","color3Output","isConnected","hasEndpoints","compilationString","_declareOutput","associatedVariableName","concat","_writeVariable","_buildSwizzle","serializationObject","serialize","scene","rootUrl","_deserialize","_a","_b","_c","_d","codeString","_dumpPropertiesCode","_codeVariableName"],"sourceRoot":"","sources":["../../../../../../../lts/core/generated/Materials/Node/Blocks/colorMergerBlock.ts"],"sourcesContent":["import { NodeMaterialBlock } from \"../nodeMaterialBlock\";\r\nimport { NodeMaterialBlockConnectionPointTypes } from \"../Enums/nodeMaterialBlockConnectionPointTypes\";\r\nimport type { NodeMaterialBuildState } from \"../nodeMaterialBuildState\";\r\nimport { NodeMaterialBlockTargets } from \"../Enums/nodeMaterialBlockTargets\";\r\nimport type { NodeMaterialConnectionPoint } from \"../nodeMaterialBlockConnectionPoint\";\r\nimport { RegisterClass } from \"../../../Misc/typeStore\";\r\nimport type { Scene } from \"../../../scene\";\r\n\r\n/**\r\n * Block used to create a Color3/4 out of individual inputs (one for each component)\r\n */\r\nexport class ColorMergerBlock extends NodeMaterialBlock {\r\n    /**\r\n     * Gets or sets the swizzle for r (meaning which component to affect to the output.r)\r\n     */\r\n    public rSwizzle: \"r\" | \"g\" | \"b\" | \"a\" = \"r\";\r\n    /**\r\n     * Gets or sets the swizzle for g (meaning which component to affect to the output.g)\r\n     */\r\n    public gSwizzle: \"r\" | \"g\" | \"b\" | \"a\" = \"g\";\r\n    /**\r\n     * Gets or sets the swizzle for b (meaning which component to affect to the output.b)\r\n     */\r\n    public bSwizzle: \"r\" | \"g\" | \"b\" | \"a\" = \"b\";\r\n    /**\r\n     * Gets or sets the swizzle for a (meaning which component to affect to the output.a)\r\n     */\r\n    public aSwizzle: \"r\" | \"g\" | \"b\" | \"a\" = \"a\";\r\n\r\n    /**\r\n     * Create a new ColorMergerBlock\r\n     * @param name defines the block name\r\n     */\r\n    public constructor(name: string) {\r\n        super(name, NodeMaterialBlockTargets.Neutral);\r\n\r\n        this.registerInput(\"rgb \", NodeMaterialBlockConnectionPointTypes.Color3, true);\r\n        this.registerInput(\"r\", NodeMaterialBlockConnectionPointTypes.Float, true);\r\n        this.registerInput(\"g\", NodeMaterialBlockConnectionPointTypes.Float, true);\r\n        this.registerInput(\"b\", NodeMaterialBlockConnectionPointTypes.Float, true);\r\n        this.registerInput(\"a\", NodeMaterialBlockConnectionPointTypes.Float, true);\r\n\r\n        this.registerOutput(\"rgba\", NodeMaterialBlockConnectionPointTypes.Color4);\r\n        this.registerOutput(\"rgb\", NodeMaterialBlockConnectionPointTypes.Color3);\r\n    }\r\n\r\n    /**\r\n     * Gets the current class name\r\n     * @returns the class name\r\n     */\r\n    public getClassName() {\r\n        return \"ColorMergerBlock\";\r\n    }\r\n\r\n    /**\r\n     * Gets the rgb component (input)\r\n     */\r\n    public get rgbIn(): NodeMaterialConnectionPoint {\r\n        return this._inputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the r component (input)\r\n     */\r\n    public get r(): NodeMaterialConnectionPoint {\r\n        return this._inputs[1];\r\n    }\r\n\r\n    /**\r\n     * Gets the g component (input)\r\n     */\r\n    public get g(): NodeMaterialConnectionPoint {\r\n        return this._inputs[2];\r\n    }\r\n\r\n    /**\r\n     * Gets the b component (input)\r\n     */\r\n    public get b(): NodeMaterialConnectionPoint {\r\n        return this._inputs[3];\r\n    }\r\n\r\n    /**\r\n     * Gets the a component (input)\r\n     */\r\n    public get a(): NodeMaterialConnectionPoint {\r\n        return this._inputs[4];\r\n    }\r\n\r\n    /**\r\n     * Gets the rgba component (output)\r\n     */\r\n    public get rgba(): NodeMaterialConnectionPoint {\r\n        return this._outputs[0];\r\n    }\r\n\r\n    /**\r\n     * Gets the rgb component (output)\r\n     */\r\n    public get rgbOut(): NodeMaterialConnectionPoint {\r\n        return this._outputs[1];\r\n    }\r\n\r\n    /**\r\n     * Gets the rgb component (output)\r\n     * @deprecated Please use rgbOut instead.\r\n     */\r\n    public get rgb(): NodeMaterialConnectionPoint {\r\n        return this.rgbOut;\r\n    }\r\n\r\n    protected _inputRename(name: string) {\r\n        if (name === \"rgb \") {\r\n            return \"rgbIn\";\r\n        }\r\n        return name;\r\n    }\r\n\r\n    private _buildSwizzle(len: number) {\r\n        const swizzle = this.rSwizzle + this.gSwizzle + this.bSwizzle + this.aSwizzle;\r\n        return \".\" + swizzle.substr(0, len);\r\n    }\r\n\r\n    protected _buildBlock(state: NodeMaterialBuildState) {\r\n        super._buildBlock(state);\r\n\r\n        const rInput = this.r;\r\n        const gInput = this.g;\r\n        const bInput = this.b;\r\n        const aInput = this.a;\r\n        const rgbInput = this.rgbIn;\r\n\r\n        const color4Output = this._outputs[0];\r\n        const color3Output = this._outputs[1];\r\n\r\n        if (rgbInput.isConnected) {\r\n            if (color4Output.hasEndpoints) {\r\n                state.compilationString +=\r\n                    this._declareOutput(color4Output, state) +\r\n                    ` = vec4(${rgbInput.associatedVariableName}, ${aInput.isConnected ? this._writeVariable(aInput) : \"0.0\"})${this._buildSwizzle(4)};\\r\\n`;\r\n            }\r\n\r\n            if (color3Output.hasEndpoints) {\r\n                state.compilationString += this._declareOutput(color3Output, state) + ` = ${rgbInput.associatedVariableName}${this._buildSwizzle(3)};\\r\\n`;\r\n            }\r\n        } else {\r\n            if (color4Output.hasEndpoints) {\r\n                state.compilationString +=\r\n                    this._declareOutput(color4Output, state) +\r\n                    ` = vec4(${rInput.isConnected ? this._writeVariable(rInput) : \"0.0\"}, ${gInput.isConnected ? this._writeVariable(gInput) : \"0.0\"}, ${\r\n                        bInput.isConnected ? this._writeVariable(bInput) : \"0.0\"\r\n                    }, ${aInput.isConnected ? this._writeVariable(aInput) : \"0.0\"})${this._buildSwizzle(4)};\\r\\n`;\r\n            }\r\n\r\n            if (color3Output.hasEndpoints) {\r\n                state.compilationString +=\r\n                    this._declareOutput(color3Output, state) +\r\n                    ` = vec3(${rInput.isConnected ? this._writeVariable(rInput) : \"0.0\"}, ${gInput.isConnected ? this._writeVariable(gInput) : \"0.0\"}, ${\r\n                        bInput.isConnected ? this._writeVariable(bInput) : \"0.0\"\r\n                    })${this._buildSwizzle(3)};\\r\\n`;\r\n            }\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    public serialize(): any {\r\n        const serializationObject = super.serialize();\r\n\r\n        serializationObject.rSwizzle = this.rSwizzle;\r\n        serializationObject.gSwizzle = this.gSwizzle;\r\n        serializationObject.bSwizzle = this.bSwizzle;\r\n        serializationObject.aSwizzle = this.aSwizzle;\r\n\r\n        return serializationObject;\r\n    }\r\n\r\n    public _deserialize(serializationObject: any, scene: Scene, rootUrl: string) {\r\n        super._deserialize(serializationObject, scene, rootUrl);\r\n\r\n        this.rSwizzle = serializationObject.rSwizzle ?? \"r\";\r\n        this.gSwizzle = serializationObject.gSwizzle ?? \"g\";\r\n        this.bSwizzle = serializationObject.bSwizzle ?? \"b\";\r\n        this.aSwizzle = serializationObject.aSwizzle ?? \"a\";\r\n    }\r\n\r\n    protected _dumpPropertiesCode() {\r\n        let codeString = super._dumpPropertiesCode();\r\n        codeString += `${this._codeVariableName}.rSwizzle = ${this.rSwizzle}};\\r\\n`;\r\n        codeString += `${this._codeVariableName}.gSwizzle = ${this.gSwizzle}};\\r\\n`;\r\n        codeString += `${this._codeVariableName}.bSwizzle = ${this.bSwizzle}};\\r\\n`;\r\n        codeString += `${this._codeVariableName}.aSwizzle = ${this.aSwizzle}};\\r\\n`;\r\n\r\n        return codeString;\r\n    }\r\n}\r\n\r\nRegisterClass(\"BABYLON.ColorMergerBlock\", ColorMergerBlock);\r\n"]},"metadata":{},"sourceType":"module"}