{"ast":null,"code":"import { Scene, Engine, FreeCamera, Vector3, HemisphericLight, MeshBuilder, StandardMaterial, Texture } from \"@babylonjs/core\";\nimport '@babylonjs/loaders';\nimport '@/tools/noise';\nexport default {\n  data: function data() {\n    return {\n      engine: null,\n      scene: null,\n      camera: null,\n      light: null,\n      ground: null\n    };\n  },\n  methods: {\n    initGame: function initGame(canvas) {\n      //Setup game environment\n      this.createEngine(canvas);\n      this.createScene();\n      this.createLight();\n      this.createCamera(); // //Create game meshes\n      // this.createGround();\n\n      this.generateVoxelTerrain(); //Start game render\n\n      this.renderGame();\n    },\n    //Environment\n    createEngine: function createEngine(canvas) {\n      this.engine = new Engine(canvas, true);\n    },\n    createScene: function createScene() {\n      this.scene = new Scene(this.engine);\n    },\n    createLight: function createLight() {\n      this.light = new HemisphericLight('light', new Vector3(0, 1, 0), this.scene);\n      this.light.intensity = 0.75;\n    },\n    createCamera: function createCamera() {\n      this.camera = new FreeCamera('camera', new Vector3(0, 7, -12), this.scene);\n      this.camera.speed = 0.25;\n      this.camera.rotation = new Vector3(0.5, 0, 0);\n      this.camera.attachControl();\n    },\n    //Meshes\n    createGround: function createGround() {\n      this.ground = MeshBuilder.CreateGround('ground', {\n        width: 200,\n        height: 100\n      }, this.scene);\n      this.setGroundTexture();\n    },\n    generateVoxelTerrain: function generateVoxelTerrain() {\n      var voxelSpacing = 0.5;\n      var voxel = MeshBuilder.CreateBox('voxel', {\n        size: voxelSpacing\n      }, this.scene); // const voxelClone = voxel.clone();\n      // voxelClone.position = new Vector3(voxelSpacing, 0, 0);\n\n      var voxelArea = this.createVoxelMap(5, 5, voxel); // for (let r = 0; r < 10; r++) {\n      //     voxelArea[r] = [];\n      //     for (let c = 0; c < 10; c++) {\n      //         const voxelHeight = (Math.random() * 3 | 0) + 2;\n      //         voxelArea[r][c] = voxel.clone();\n      //         voxelArea[r][c].position = new Vector3(voxelHeight, 0, 0);\n      //     }\n      // }\n\n      console.log(voxelArea);\n    },\n    //Render Main Game\n    renderGame: function renderGame() {\n      var _this = this;\n\n      this.engine.runRenderLoop(function () {\n        _this.scene.render();\n      });\n    },\n    //Helpers\n    setGroundTexture: function setGroundTexture() {\n      var groundMaterial = new StandardMaterial('ground_texture', this.scene);\n      groundMaterial.diffuseTexture = new Texture('./assets/textures/mars_1k_color.jpg');\n      this.ground.material = groundMaterial;\n    },\n    createVoxelMap: function createVoxelMap(height, width, voxel) {\n      var voxelArea = [];\n\n      for (var r = 0; r < height; r++) {\n        voxelArea[r] = [];\n\n        for (var c = 0; c < width; c++) {\n          // const voxelHeight = (Math.random() * 3 | 0) + 2;\n          voxelArea[r][c] = voxel.clone();\n          voxelArea[r][c].position = new Vector3(r / 2, 0, c / 2);\n        }\n      }\n\n      return voxelArea;\n    }\n  }\n};","map":{"version":3,"sources":["/home/ea/Development/Babylon/red/src/framework/GameInitializer.js"],"names":["Scene","Engine","FreeCamera","Vector3","HemisphericLight","MeshBuilder","StandardMaterial","Texture","data","engine","scene","camera","light","ground","methods","initGame","canvas","createEngine","createScene","createLight","createCamera","generateVoxelTerrain","renderGame","intensity","speed","rotation","attachControl","createGround","CreateGround","width","height","setGroundTexture","voxelSpacing","voxel","CreateBox","size","voxelArea","createVoxelMap","console","log","runRenderLoop","render","groundMaterial","diffuseTexture","material","r","c","clone","position"],"mappings":"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","sourcesContent":["import {\n    Scene,\n    Engine,\n    FreeCamera,\n    Vector3,\n    HemisphericLight,\n    MeshBuilder,\n    StandardMaterial,\n    Texture,\n} from \"@babylonjs/core\";\nimport '@babylonjs/loaders';\nimport '@/tools/noise'\n\nexport default {\n    data() {\n        return {\n            engine: null,\n            scene: null,\n            camera: null,\n            light: null,\n            ground: null,\n        };\n    },\n    methods: {\n        initGame(canvas) {\n            //Setup game environment\n            this.createEngine(canvas);\n            this.createScene();\n            this.createLight();\n            this.createCamera();\n\n            // //Create game meshes\n            // this.createGround();\n            this.generateVoxelTerrain();\n\n            //Start game render\n            this.renderGame();\n        },\n\n        //Environment\n        createEngine(canvas) {\n            this.engine = new Engine(canvas, true);\n        },\n        createScene() {\n            this.scene = new Scene(this.engine);\n        },\n        createLight() {\n            this.light = new HemisphericLight('light', new Vector3(0, 1, 0), this.scene);\n            this.light.intensity = 0.75;\n        },\n        createCamera() {\n            this.camera = new FreeCamera('camera', new Vector3(0, 7, -12), this.scene);\n            this.camera.speed = 0.25;\n            this.camera.rotation = new Vector3(0.5, 0, 0);\n            this.camera.attachControl();\n        },\n\n        //Meshes\n        createGround() {\n            this.ground = MeshBuilder.CreateGround('ground', {width: 200, height: 100}, this.scene);\n\n            this.setGroundTexture();\n        },\n        generateVoxelTerrain() {\n            const voxelSpacing = 0.5;\n            const voxel = MeshBuilder.CreateBox('voxel', {size: voxelSpacing}, this.scene);\n            // const voxelClone = voxel.clone();\n            // voxelClone.position = new Vector3(voxelSpacing, 0, 0);\n            const voxelArea = this.createVoxelMap(5, 5, voxel);\n            // for (let r = 0; r < 10; r++) {\n            //     voxelArea[r] = [];\n            //     for (let c = 0; c < 10; c++) {\n            //         const voxelHeight = (Math.random() * 3 | 0) + 2;\n            //         voxelArea[r][c] = voxel.clone();\n            //         voxelArea[r][c].position = new Vector3(voxelHeight, 0, 0);\n            //     }\n            // }\n\n            console.log(voxelArea);\n        },\n        //Render Main Game\n        renderGame() {\n            this.engine.runRenderLoop(() => {\n                this.scene.render();\n            });\n        },\n\n        //Helpers\n        setGroundTexture() {\n            const groundMaterial = new StandardMaterial('ground_texture', this.scene);\n            groundMaterial.diffuseTexture = new Texture('./assets/textures/mars_1k_color.jpg');\n\n            this.ground.material = groundMaterial;\n        },\n        createVoxelMap(height, width, voxel) {\n            const voxelArea = [];\n            for (let r = 0; r < height; r++) {\n                voxelArea[r] = [];\n                for (let c = 0; c < width; c++) {\n                    // const voxelHeight = (Math.random() * 3 | 0) + 2;\n                    voxelArea[r][c] = voxel.clone();\n                    voxelArea[r][c].position = new Vector3(r / 2, 0, c / 2);\n                }\n            }\n\n            return voxelArea;\n        },\n    },\n}"]},"metadata":{},"sourceType":"module"}